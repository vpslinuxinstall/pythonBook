
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction to GUI programming with tkinter &#8212; Object-Oriented Programming in Python 1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sorting, searching and algorithm analysis" href="Sorting_and_Searching_Algorithms.html" />
    <link rel="prev" title="Useful modules in the Standard Library" href="Useful_Libraries.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Sorting_and_Searching_Algorithms.html" title="Sorting, searching and algorithm analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Useful_Libraries.html" title="Useful modules in the Standard Library"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Object-Oriented Programming in Python 1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-to-gui-programming-with-tkinter">
<h1>Introduction to GUI programming with <code class="docutils literal notranslate"><span class="pre">tkinter</span></code><a class="headerlink" href="#introduction-to-gui-programming-with-tkinter" title="Permalink to this headline">¶</a></h1>
<p>We have previously seen how to write text-only programs which have a <em>command-line interface</em>, or CLI.  Now we will briefly look at creating a program with a <em>graphical user interface</em>, or GUI.  In this chapter we will use <code class="docutils literal notranslate"><span class="pre">tkinter</span></code>, a module in the Python standard library which serves as an interface to Tk, a simple <em>toolkit</em>. There are many other toolkits available, but they often vary across platforms.  If you learn the basics of <code class="docutils literal notranslate"><span class="pre">tkinter</span></code>, you should see many similarities should you try to use a different toolkit.</p>
<p>We will see how to make a simple GUI which handles user input and output.  GUIs often use a form of OO programming which we call <em>event-driven</em>: the program responds to <em>events</em>, which are actions that a user takes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in some Linux distributions, like Ubuntu and Debian, the <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> module is packaged separately to the rest of Python, and must be installed separately.</p>
</div>
<div class="section" id="event-driven-programming">
<h2>Event-driven programming<a class="headerlink" href="#event-driven-programming" title="Permalink to this headline">¶</a></h2>
<p>Anything that happens in a user interface is an <em>event</em>.  We say that an event is <em>fired</em> whenever the user does something – for example, clicks on a button or types a keyboard shortcut.  Some events could also be triggered by occurrences which are not controlled by the user – for example, a background task might complete, or a network connection might be established or lost.</p>
<p>Our application needs to monitor, or <em>listen</em> for, all the events that we find interesting, and respond to them in some way if they occur.  To do this, we usually associate certain functions with particular events.  We call a function which performs an action in response to an event an <em>event handler</em> – we <em>bind</em> handlers to events.</p>
</div>
<div class="section" id="tkinter-basics">
<h2><code class="docutils literal notranslate"><span class="pre">tkinter</span></code> basics<a class="headerlink" href="#tkinter-basics" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">tkinter</span></code> provides us with a variety of common GUI elements which we can use to build our interface – such as buttons, menus and various kinds of entry fields and display areas.  We call these elements <em>widgets</em>.  We are going to construct a <em>tree</em> of widgets for our GUI – each widget will have a parent widget, all the way up to the <em>root window</em> of our application.  For example, a button or a text field needs to be <em>inside</em> some kind of containing window.</p>
<p>The widget classes provide us with a lot of default functionality.  They have methods for configuring the GUI’s appearance – for example, arranging the elements according to some kind of <em>layout</em> – and for handling various kinds of user-driven events.  Once we have constructed the backbone of our GUI, we will need to customise it by integrating it with our internal application class.</p>
<p>Our first GUI will be a window with a label and two buttons:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">Tk</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Button</span>

<span class="k">class</span> <span class="nc">MyFirstGUI</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;A simple GUI&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;This is our first GUI!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Greet&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">master</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Greetings!&quot;</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
<span class="n">my_gui</span> <span class="o">=</span> <span class="n">MyFirstGUI</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Try executing this code for yourself.  You should be able to see a window with a title, a text label and two buttons – one which prints a message in the console, and one which closes the window.  The window should have all the normal properties of any other window you encounter in your window manager – you are probably able to drag it around by the titlebar, resize it by dragging the frame, and maximise, minimise or close it using buttons on the titlebar.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>window manager</em> is the part of your operating system which handles windows.  All the widgets inside a window, like buttons and other controls, may look different in every GUI toolkit, but the way that the window frames and title bars look and behave is determined by your window manager and should always stay the same.</p>
</div>
<p>We are using three widgets: <code class="docutils literal notranslate"><span class="pre">Tk</span></code> is the class which we use to create the <em>root</em> window – the main window of our application.  Our application should only have one root, but it is possible for us to create other windows which are separate from the main window.</p>
<p><code class="docutils literal notranslate"><span class="pre">Button</span></code> and <code class="docutils literal notranslate"><span class="pre">Label</span></code> should be self-explanatory.  Each of them has a parent widget, which we pass in as the first parameter to the constructor – we have put the label and both buttons inside the main window, so they are the main window’s children in the tree.  We use the <code class="docutils literal notranslate"><span class="pre">pack</span></code> method on each widget to position it inside its parent – we will learn about different kinds of layout later.</p>
<p>All three of these widgets can display text (we could also make them display images).  The label is a static element – it doesn’t <em>do</em> anything by default; it just displays something.  Buttons, however, are designed to cause something to happen when they are clicked.  We have used the <code class="docutils literal notranslate"><span class="pre">command</span></code> keyword parameter when constructing each button to specify the function which should handle each button’s click events – both of these functions are object methods.</p>
<p>We didn’t have to write any code to make the buttons fire click events or to bind the methods to them explicitly.  That functionality is already built into the button objects – we only had to provide the handlers.  We also didn’t have to write our own function for closing the window, because there is already one defined as a method on the window object.  We did, however, write our own method for printing a message to the console.</p>
<p>There are many ways in which we could organise our application class. In this example, our class doesn’t inherit from any <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> objects – we use <em>composition</em> to associate our tree of widgets with our class.  We could also use <em>inheritance</em> to extend one of the widgets in the tree with our custom functions.</p>
<p><code class="docutils literal notranslate"><span class="pre">root.mainloop()</span></code> is a method on the main window which we execute when we want to run our application. This method will loop forever, waiting for events from the user, until the user exits the program – either by closing the window, or by terminating the program with a keyboard interrupt in the console.</p>
<div class="section" id="widget-classes">
<h3>Widget classes<a class="headerlink" href="#widget-classes" title="Permalink to this headline">¶</a></h3>
<p>There are many different widget classes built into <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> – they should be familiar to you from other GUIs:</p>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">Frame</span></code> is a container widget which is placed inside a window, which can have its own border and background – it is used to group related widgets together in an application’s layout.</li>
<li><code class="docutils literal notranslate"><span class="pre">Toplevel</span></code> is a container widget which is displayed as a separate window.</li>
<li><code class="docutils literal notranslate"><span class="pre">Canvas</span></code> is a widget for drawing graphics.  In advanced usage, it can also be used to create custom widgets – because we can draw anything we like inside it, and make it interactive.</li>
<li><code class="docutils literal notranslate"><span class="pre">Text</span></code> displays formatted text, which can be editable and can have embedded images.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> usually maps directly onto a user action – when the user clicks on a button, something should happen.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">Label</span></code> is a simple widget which displays a short piece of text or an image, but usually isn’t interactive.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">Message</span></code> is similar to a <code class="docutils literal notranslate"><span class="pre">Label</span></code>, but is designed for longer bodies of text which need to be wrapped.</li>
<li>A <code class="docutils literal notranslate"><span class="pre">Scrollbar</span></code> allows the user to scroll through content which is too large to be visible all at once.</li>
<li><code class="docutils literal notranslate"><span class="pre">Checkbutton</span></code>, <code class="docutils literal notranslate"><span class="pre">Radiobutton</span></code>, <code class="docutils literal notranslate"><span class="pre">Listbox</span></code>, <code class="docutils literal notranslate"><span class="pre">Entry</span></code> and <code class="docutils literal notranslate"><span class="pre">Scale</span></code> are different kinds of input widgets – they allow the user to enter information into the program.</li>
<li><code class="docutils literal notranslate"><span class="pre">Menu</span></code> and <code class="docutils literal notranslate"><span class="pre">Menubutton</span></code> are used to create pull-down menus.</li>
</ul>
</div>
</div>
<div class="section" id="layout-options">
<h2>Layout options<a class="headerlink" href="#layout-options" title="Permalink to this headline">¶</a></h2>
<p>The GUI in the previous example has a relatively simple layout: we arranged the three widgets in a single column inside the window.  To do this, we used the <code class="docutils literal notranslate"><span class="pre">pack</span></code> method, which is one of the three different <em>geometry managers</em> available in <code class="docutils literal notranslate"><span class="pre">tkinter</span></code>.  We have to use one of the available geometry managers to specify a position for each of our widgets, otherwise the widget will not appear in our window.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">pack</span></code> arranges widgets vertically inside their parent container, from the top down, but we can change the alignment to the bottom, left or right by using the optional <code class="docutils literal notranslate"><span class="pre">side</span></code> parameter.  We can mix different alignments in the same container, but this may not work very well for complex layouts.  It should work reasonably well in our simple case, however:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">LEFT</span><span class="p">,</span> <span class="n">RIGHT</span>

<span class="c1"># (...)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">)</span>
</pre></div>
</div>
<p>We can create quite complicated layouts with <code class="docutils literal notranslate"><span class="pre">pack</span></code> by grouping widgets together in frames and aligning the groups to our liking – but we can avoid a lot of this complexity by using the <code class="docutils literal notranslate"><span class="pre">grid</span></code> method instead.  It allows us to position widgets in a more flexible way, using a <em>grid layout</em>.  This is the geometry manager recommended for complex interfaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">W</span>

<span class="c1"># (...)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We place each widget in a cell inside a table by specifying a row and a column – the default row is the first available empty row, and the default column is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>If a widget is smaller than its cell, we can customise how it is aligned using the <code class="docutils literal notranslate"><span class="pre">sticky</span></code> parameter – the possible values are the cardinal directions (<code class="docutils literal notranslate"><span class="pre">N</span></code>, <code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">E</span></code> and <code class="docutils literal notranslate"><span class="pre">W</span></code>), which we can combine through addition.  By default, the widget is centered both vertically and horizontally, but we can make it <em>stick</em> to a particular side by including it in the <code class="docutils literal notranslate"><span class="pre">sticky</span></code> parameter.  For example, <code class="docutils literal notranslate"><span class="pre">sticky=W</span></code> will cause the widget to be left-aligned horizontally, and <code class="docutils literal notranslate"><span class="pre">sticky=W+E</span></code> will cause it to be stretched to fill the whole cell horizontally.  We can also specify corners using <code class="docutils literal notranslate"><span class="pre">NE</span></code>, <code class="docutils literal notranslate"><span class="pre">SW</span></code>, etc..</p>
<p>To make a widget span multiple columns or rows, we can use the <code class="docutils literal notranslate"><span class="pre">columnspan</span></code> and <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> options – in the example above, we have made the label span two columns so that it takes up the same space horizontally as both of the buttons underneath it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Never use both <code class="docutils literal notranslate"><span class="pre">pack</span></code> and <code class="docutils literal notranslate"><span class="pre">grid</span></code> inside the same window.  The algorithms which they use to calculate widget positions are not compatible with each other, and your program will hang forever as <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> tries unsuccessfully to create a widget layout which satisfies both of them.</p>
</div>
<p>The third geometry manager is <code class="docutils literal notranslate"><span class="pre">place</span></code>, which allows us to provide explicit sizes and positions for widgets.  It is seldom a good idea to use this method for ordinary GUIs – it’s far too inflexible and time consuming to specify an absolute position for every element.  There are some specialised cases, however, in which it can come in useful.</p>
</div>
<div class="section" id="custom-events">
<h2>Custom events<a class="headerlink" href="#custom-events" title="Permalink to this headline">¶</a></h2>
<p>So far we have only bound event handlers to events which are defined in <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> by default – the <code class="docutils literal notranslate"><span class="pre">Button</span></code> class already knows about button clicks, since clicking is an expected part of normal button behaviour.  We are not restricted to these particular events, however – we can make widgets listen for other events and bind handlers to them, using the <code class="docutils literal notranslate"><span class="pre">bind</span></code> method which we can find on every widget class.</p>
<p>Events are uniquely identified by a sequence name in string format – the format is described by a mini-language which is not specific to Python.  Here are a few examples of common events:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;Button-1&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;Button-2&gt;&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;&lt;Button-3&gt;&quot;</span></code> are events which signal that a particular mouse button has been pressed while the mouse cursor is positioned over the widget in question.  <em>Button 1</em> is the left mouse button, <em>Button 3</em> is the right, and <em>Button 2</em> the middle button – but remember that not all mice have a middle button.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;ButtonRelease-1&gt;&quot;</span></code> indicates that the left button has been released.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;B1-Motion&gt;&quot;</span></code> indicates that the mouse was moved while the left button was pressed (we can use <em>B2</em> or <em>B3</em> for the other buttons).</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;Enter&gt;&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;&lt;Leave&gt;&quot;</span></code> tell us that the mouse curson has entered or left the widget.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;Key&gt;&quot;</span></code> means that any key on the keyboard was pressed.  We can also listen for specific key presses, for example <code class="docutils literal notranslate"><span class="pre">&quot;&lt;Return&gt;&quot;</span></code> (the <em>enter</em> key), or combinations like <code class="docutils literal notranslate"><span class="pre">&quot;&lt;Shift-Up&gt;&quot;</span></code> (<em>shift-up-arrow</em>).  Key presses of most printable characters are expressed as the bare characters, without brackets – for example, the letter <code class="docutils literal notranslate"><span class="pre">a</span></code> is just <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;&lt;Configure&gt;&quot;</span></code> means that the widget has changed size.</li>
</ul>
<p>We can now extend our simple example to make the label interactive – let us make the label text cycle through a sequence of messages whenever it is clicked:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">Tk</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">StringVar</span>

<span class="k">class</span> <span class="nc">MyFirstGUI</span><span class="p">:</span>
    <span class="n">LABEL_TEXT</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;This is our first GUI!&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Actually, this is our second GUI.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;We made it more interesting...&quot;</span><span class="p">,</span>
        <span class="s2">&quot;...by making this label interactive.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Go on, click on it again.&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;A simple GUI&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LABEL_TEXT</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label_index</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_label_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Greet&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greet_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">master</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_button</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Greetings!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cycle_label_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_index</span> <span class="o">%=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LABEL_TEXT</span><span class="p">)</span> <span class="c1"># wrap around</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LABEL_TEXT</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label_index</span><span class="p">])</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
<span class="n">my_gui</span> <span class="o">=</span> <span class="n">MyFirstGUI</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Updating a label’s text is a little convoluted – we can’t simply update the text using a normal Python string.  Instead, we have to provide the label with a special <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> string variable object, and set a new value on the object whenever we want the text in the label to change.</p>
<p>We have defined a handler which cycles to the next text string in the sequence, and used the <code class="docutils literal notranslate"><span class="pre">bind</span></code> method of the label to bind our new handler to left clicks on the label.  It is important to note that this handler takes an additional parameter – an event object, which contains some information about the event.  We could use the same handler for many different events (for example, a few similar events which happen on different widgets), and use this parameter to distinguish between them.  Since in this case we are only using our handler for one kind of event, we will simply ignore the event parameter.</p>
</div>
<div class="section" id="putting-it-all-together">
<h2>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h2>
<p>Now we can use all this information to create a simple calculator.  We will allow the user to enter a number in a text field, and either add it to or subtract it from a running total, which we will display.  We will also allow the user to reset the total:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">Tk</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">Entry</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">,</span> <span class="n">END</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">E</span>

<span class="k">class</span> <span class="nc">Calculator</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Calculator&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entered_number</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total_label_text</span> <span class="o">=</span> <span class="n">IntVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total_label_text</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Total:&quot;</span><span class="p">)</span>

        <span class="n">vcmd</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span> <span class="c1"># we have to wrap the command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="n">validatecommand</span><span class="o">=</span><span class="p">(</span><span class="n">vcmd</span><span class="p">,</span> <span class="s1">&#39;%P&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtract_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;subtract&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">))</span>

        <span class="c1"># LAYOUT</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">E</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtract_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_text</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_text</span><span class="p">:</span> <span class="c1"># the field is being cleared</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entered_number</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entered_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_text</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;add&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entered_number</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;subtract&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entered_number</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># reset</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total_label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
<span class="n">my_gui</span> <span class="o">=</span> <span class="n">Calculator</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>We have defined two methods on our class: the first is used to validate the contents of the entry field, and the second is used to update our total.</p>
<div class="section" id="validating-text-entry">
<h3>Validating text entry<a class="headerlink" href="#validating-text-entry" title="Permalink to this headline">¶</a></h3>
<p>Our <code class="docutils literal notranslate"><span class="pre">validate</span></code> method checks that the contents of the entry field are a valid integer: whenever the user types something inside the field, the contents will only change if the new value is a valid number.  We have also added a special exception for when the value is nothing, so that the field can be cleared (by the user, or by us).  Whenever the value of the field changes, we store the integer value of the contents in <code class="docutils literal notranslate"><span class="pre">self.entered_number</span></code>. We have to perform the conversion at this point anyway to see if it’s a valid integer – if we store the value now, we won’t have to do the conversion again when it’s time to update the total.</p>
<p>How do we connect this validation function up to our entry field?  We use the <code class="docutils literal notranslate"><span class="pre">validatecommand</span></code> parameter.  The function we use for this command must return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the entry’s value is allowed to change and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise, and it <em>must</em> be wrapped using a widget’s <code class="docutils literal notranslate"><span class="pre">register</span></code> method (we have used this method on the window object).</p>
<p>We can also optionally specify arguments which must be passed to the function – to do this, we pass in a tuple containing the function and a series of strings which contain special codes.  When the function is called, these codes will be replaced by different pieces of information about the change which is being made to the entry value.  In our example, we only care about one piece of information: what the new value is going to be.  The code string for this is <code class="docutils literal notranslate"><span class="pre">'%P'</span></code>, so we add it into the tuple.</p>
<p>Another optional parameter which is passed to <code class="docutils literal notranslate"><span class="pre">Entry</span></code> is <code class="docutils literal notranslate"><span class="pre">validate</span></code>, which specifies when validation should occur.  the default value is <code class="docutils literal notranslate"><span class="pre">'none'</span></code> (a string value, not Python’s <code class="docutils literal notranslate"><span class="pre">None</span></code>!), which means that no validation should be done.  We have selected <code class="docutils literal notranslate"><span class="pre">'key'</span></code>, which will cause the entry to be validated whenever the user types something inside it – but it will also be triggered when we clear the entry from inside our <code class="docutils literal notranslate"><span class="pre">update</span></code> method.</p>
</div>
<div class="section" id="updating-the-total">
<h3>Updating the total<a class="headerlink" href="#updating-the-total" title="Permalink to this headline">¶</a></h3>
<p>We have written a single handler for updating the total, because what we have to do in all three cases is very similar.  However, the way that we update the value depends on which button was pressed – that’s why our handler needs a parameter.  This presents us with a problem – unfortunately, <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> has no option for specifying parameters to be passed to button commands (or <em>callbacks</em>).  We can solve the problem by wrapping the handler in three different functions, each of which calls the handler with a different parameter when it is called.  We have used lambda functions to create these wrappers because they are so simple.</p>
<p>Inside the handler, we first update our running total using the integer value of the entry field (which is calculated and stored inside the <code class="docutils literal notranslate"><span class="pre">validate</span></code> method – note that we initialise it to zero in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, so it’s safe for the user to press the buttons without typing anything).  We know how to update the total because of the parameter which is passed into the handler.</p>
<p>Once we have updated the total, we need to update the text displayed by the label to show the new total – we do this by setting the new value on the <code class="docutils literal notranslate"><span class="pre">IntVar</span></code> linked to the label as its text variable.  This works just like the <code class="docutils literal notranslate"><span class="pre">StringVar</span></code> in the previous example, except that an <code class="docutils literal notranslate"><span class="pre">IntVar</span></code> is used with integer values, not strings.</p>
<p>Finally, once we have used the number the user entered, we clear it from the entry field using the entry widget’s delete method by deleting all the characters from the first index (zero) to the end (<code class="docutils literal notranslate"><span class="pre">END</span></code> is a constant defined by <code class="docutils literal notranslate"><span class="pre">tkinter</span></code>).  We should also clear our internal value for the last number to be entered – fortunately, our deletion triggers the validation method, which already resets this number to zero if the entry is cleared.</p>
</div>
<div class="section" id="exercise-1">
<h3>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Explain why we needed to use lambdas to wrap the function calls in the last example. Rewrite the button definitions to replace the lambdas with functions which have been written out in full.</li>
<li>Create a GUI for the guessing game from exercise 3 in the previous chapter.</li>
</ol>
</div>
</div>
<div class="section" id="answers-to-exercises">
<h2>Answers to exercises<a class="headerlink" href="#answers-to-exercises" title="Permalink to this headline">¶</a></h2>
<div class="section" id="answer-to-exercise-1">
<h3>Answer to exercise 1<a class="headerlink" href="#answer-to-exercise-1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">The lambdas are necessary because we need to pass <em>functions</em> into the button constructors, which the button objects will be able to call later. If we used the bare function calls, we would be calling the functions and passing their return values (in this case, <code class="docutils literal notranslate"><span class="pre">None</span></code>) into the constructors.  Here is an example of how we can rewrite this code fragment with full function definitions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update_add</span><span class="p">():</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_subtract</span><span class="p">():</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;subtract&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_reset</span><span class="p">():</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;reset&quot;</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">add_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">update_add</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">subtract_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">update_subtract</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">update_reset</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Here is an example program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="k">import</span> <span class="n">Tk</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">Entry</span><span class="p">,</span> <span class="n">StringVar</span><span class="p">,</span> <span class="n">DISABLED</span><span class="p">,</span> <span class="n">NORMAL</span><span class="p">,</span> <span class="n">END</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">E</span>

<span class="k">class</span> <span class="nc">GuessingGame</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Guessing Game&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">secret_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_guesses</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Guess a number from 1 to 100&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="p">)</span>

        <span class="n">vcmd</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span> <span class="c1"># we have to wrap the command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="n">validatecommand</span><span class="o">=</span><span class="p">(</span><span class="n">vcmd</span><span class="p">,</span> <span class="s1">&#39;%P&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">guess_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Guess&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">guess_number</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Play again&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guess_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_text</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_text</span><span class="p">:</span> <span class="c1"># the field is being cleared</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_text</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">guess</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="n">guess</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">guess_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_guesses</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Guess a number from 1 to 100&quot;</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret_number</span><span class="p">:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_guesses</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;es&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Congratulations! You guessed the number after </span><span class="si">%d</span><span class="s2"> guess</span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_guesses</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">guess_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">NORMAL</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret_number</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Too low! Guess again!&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Too high! Guess again!&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guess</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_guesses</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Guess a number from 1 to 100&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_text</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">guess_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">NORMAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
<span class="n">my_gui</span> <span class="o">=</span> <span class="n">GuessingGame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction to GUI programming with <code class="docutils literal notranslate"><span class="pre">tkinter</span></code></a><ul>
<li><a class="reference internal" href="#event-driven-programming">Event-driven programming</a></li>
<li><a class="reference internal" href="#tkinter-basics"><code class="docutils literal notranslate"><span class="pre">tkinter</span></code> basics</a><ul>
<li><a class="reference internal" href="#widget-classes">Widget classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#layout-options">Layout options</a></li>
<li><a class="reference internal" href="#custom-events">Custom events</a></li>
<li><a class="reference internal" href="#putting-it-all-together">Putting it all together</a><ul>
<li><a class="reference internal" href="#validating-text-entry">Validating text entry</a></li>
<li><a class="reference internal" href="#updating-the-total">Updating the total</a></li>
<li><a class="reference internal" href="#exercise-1">Exercise 1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#answers-to-exercises">Answers to exercises</a><ul>
<li><a class="reference internal" href="#answer-to-exercise-1">Answer to exercise 1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Useful_Libraries.html"
                        title="previous chapter">Useful modules in the Standard Library</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Sorting_and_Searching_Algorithms.html"
                        title="next chapter">Sorting, searching and algorithm analysis</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Introduction_to_GUI_Programming.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Sorting_and_Searching_Algorithms.html" title="Sorting, searching and algorithm analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="Useful_Libraries.html" title="Useful modules in the Standard Library"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Object-Oriented Programming in Python 1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, 2014, University of Cape Town and individual contributors. This work is released under the CC BY-SA 4.0 licence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>